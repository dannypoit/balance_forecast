<body>
  <header>
    <div class="container container-pad-right">
      <nav class="navbar navbar-expand-lg navbar-light p-0">
        <%= link_to 'Balance Forecast', root_path, class: 'navbar-brand' %>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTop" aria-controls="navbarTop" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarTop">
          <ul class="navbar-nav ml-auto p-2">
            <li class="nav-item">
              <div class="dropdown d-inline">
                <a type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Settings
                </a>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                  <%= link_to 'Change email or password', edit_user_registration_path(current_user), class: 'dropdown-item' %>
                </div>
              </div>
            </li>
            <li class="nav-item ml-4">
              <%= link_to "Log out", destroy_user_session_path, method: :delete, class: 'align-middle' %>
            </li>
          </ul>
        </div>
      </nav>
    </div>
  </header>

  <main role="main" class="py-4"> 
    <div class="container pb-5">
      <% if notice.present? %>
        <div class="alert alert-info" role="alert"><%= notice %></div>
      <% end %>

      <% if alert.present? %>
        <div class="alert alert-danger" role="alert"><%= alert %></div>
      <% end %>

      <table class="table table-striped table-bordered m-0 p-0"">
        <thead class="m-0 p-0">
          <tr class="m-0 p-0">
            <th class="top-row-cells">
              <div class="dropdown">
                <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Time period to display
                </button>
                <div class="dropdown-menu" aria-labelledby="load-more-dropdown">
                  <button type="button" class="dropdown-item" id="load-more-3">3 months</button>
                  <button type="button" class="dropdown-item" id="load-more-6">6 months</button>
                  <button type="button" class="dropdown-item" id="load-more-9">9 months</button>
                  <button type="button" class="dropdown-item" id="load-more-12">1 year</button>
                  <button type="button" class="dropdown-item" id="load-more-24">2 years</button>
                  <button type="button" class="dropdown-item" id="load-more-36">3 years</button>
                  <button type="button" class="dropdown-item" id="load-more-48">4 years</button>
                  <button type="button" class="dropdown-item" id="load-more-60">5 years</button>
                </div>
              </div>
            </th>
            <th class="top-row-cells"></th>
            <th class="top-row-cells"></th>
            <th class="text-right current-balance-label-cell" style="font-weight: 400;">
              Current balance:
            </th>
            <th class="h4" id="currentBalanceCell">
              <span data-current-balance data-user-id="<%= current_user.id %>" data-time-zone-offset="<%= TimeZone.find(current_user.time_zone_id).relative_to_gmt %>" id="currentBalance"><%= number_to_currency(current_user.current_balance) %></span><i id="currentBalSaveIcon" class="fas fa-save m-2 d-none"></i>
            </th>
          </tr>
          <tr class="header-row">
            <th scope="col" class="date-col">
              Date
            </th>
            <th scope="col">
              Description
            </th>
            <th scope="col">
              Frequency
            </th>
            <th scope="col">
              Amount
            </th>
            <th scope="col">
              Balance
            </th>
          </tr>
        </thead>
        <tbody>
          <tr class="new-entry-row">
          <%= form_for(@entry) do |f| %>
            <td class="date-col">
              <%= f.date_field :date %>
            </td>
            <td>
              <%= f.text_field :description %>
            </td>
            <td>
              <%= f.select :frequency, options_for_select([
                  ["", ""], 
                  ["One-time", "one-time"], 
                  ["Weekly", "weekly"], 
                  ["Bi-weekly", "bi-weekly"], 
                  ["Monthly", "monthly"], 
                  ["Bi-monthly", "bi-monthly"],
                  ["Quarterly", "quarterly"],
                  ["Annually", "annually"]
                ]), class: '' %>
            </td>
            <td>
              <%= f.number_field :amount, step: 0.01 %>
            </td>
            <td>
              <%= f.submit 'Add', class: 'btn btn-success' %>
            </td>
          <% end %>
          </tr>
        </tbody>
        <tbody class="entries-table">
        </tbody>
      </table>
    </div>
  </main>

  <footer class="footer py-3">
    <div class="container container-pad-right small">
      <%= link_to 'Privacy Policy', privacy_path %>
      <%= link_to 'Terms of Use', terms_path, class: 'ml-2 ml-sm-3' %>

      <span class="text-muted float-right copyright">&copy; 2020 Balance Forecast</span>
    </div>
  </footer>
